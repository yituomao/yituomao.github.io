(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f377b4ee"],{"37c1":function(t,e,n){"use strict";var i=n("78b1"),a=n.n(i);a.a},"78b1":function(t,e,n){},d1d5:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cont"},[n("div",{staticClass:"control"},[""!=t.map?n("GetRouter",{ref:"grouter",attrs:{map:t.map,center:t.center,destination:t.destination},on:{showRouter:function(e){t.userStatus=1},setSteps:t.setSteps,setPaths:t.setPaths}}):t._e(),0!=t.userStatus?n("div",{staticClass:"cdiv"},[n("StartNav",{attrs:{steps:t.steps,center:t.center,paths:t.paths},on:{start:t.starting,xunche:t.xunche,stop:t.stoping}}),n("Baidu",{attrs:{dest:t.destination}}),n("Gaode",{attrs:{dest:t.destination}}),n("Tencent",{attrs:{dest:t.destination}}),""!=t.map&&t.paths.length>0?n("Simulation",{attrs:{map:t.map,paths:t.paths}}):t._e()],1):t._e()],1),""!=t.map?n("locating",{attrs:{map:t.map},on:{changeCenter:t.changeCenter,achieveDistance:t.achieveDistance,achieveTime:t.achieveTime}}):t._e(),n("div",{staticClass:"amap-wrapper",attrs:{id:"container"}})],1)},a=[],o=(n("28a5"),n("6d67"),n("6b54"),n("87b3"),n("67cc")),s=n("f015"),r=n("5ff3"),c=n("7e3c"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},h=[],p={props:["map"],data:function(){return{nowTime:(new Date).getTime(),oldTime:(new Date).getTime(),moveLength:0,center:"",oldP:"",newP:""}},methods:{locatedSucc:function(t){this.$emit("changeCenter",t.position),this.newP=t.position,""==this.center&&(this.oldP=t.position),this.center=t.position;var e=AMap.GeometryUtil.distance(this.oldP,this.newP);this.nowTime=(new Date).getTime(),e>200?(this.oldP=this.newP,this.oldTime=this.nowTime,this.$emit("achieveDistance")):this.nowTime-this.oldTime>25e3&&(this.oldTime=this.nowTime,this.$emit("achieveTime"))},locatedFail:function(t){console.log(t)},locating:function(){var t=this;this.geo.getCurrentPosition(function(e,n){"complete"==e?t.locatedSucc(n):t.locatedFail(n),t.ltimer=setTimeout(function(){t.locating()},2e3)})},init:function(){var t=this;this.map.plugin("AMap.Geolocation",function(){function e(t){console.log("aa")}function n(t){console.log(t)}t.geolocation=new AMap.Geolocation({enableHighAccuracy:!0,timeout:3e3,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!1,showCircle:!1,panToLocation:!0,zoomToAccuracy:!0}),AMap.event.addListener(t.geolocation,"complete",e),AMap.event.addListener(t.geolocation,"error",n),t.geo=new AMap.Geolocation({enableHighAccuracy:!0,timeout:2e3,maximumAge:0,convert:!0,showButton:!1,showMarker:!0,showCircle:!1,panToLocation:!1,zoomToAccuracy:!1}),t.map.addControl(t.geolocation),t.map.addControl(t.geo)})}},mounted:function(){this.init()}},l=p,m=n("2877"),d=Object(m["a"])(l,u,h,!1,null,null,null),g=d.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"monidaohang",on:{click:t.startAni}},[t._v("\n\t模拟导航\n\t"),n("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.moniStatus,expression:"moniStatus!=0"}]},[n("div",{on:{click:function(e){return e.stopPropagation(),t.overAni(e)}}},[t._v("结束")]),n("div",{on:{click:function(e){return e.stopPropagation(),t.pauseAnimation(e)}}},[t._v("暂停")]),n("div",{on:{click:function(e){return e.stopPropagation(),t.resumeAnimation(e)}}},[t._v("继续")])])])},v=[],w={props:["map","paths"],data:function(){return{currMaker:"",passedPolyline:"",passedPath:"",moniStatus:0}},methods:{hidePanel:function(){var t=this.paths[0].lng,e=this.paths[0].lat;console.log(this.paths[0]),this.currMaker.setPosition([t,e]),this.currMaker.hide(),this.passedPolyline.setPath(null),this.passedPolyline.hide()},startAni:function(){this.currMaker.show(),this.passedPolyline.show(),this.moniStatus=1,this.currMaker.moveAlong(this.paths,{duration:200,autoRotation:!0})},overAni:function(){this.moniStatus=0,this.currMaker.stopMove(),this.hidePanel()},pauseAnimation:function(){this.moniStatus=2,this.currMaker.pauseMove()},resumeAnimation:function(){this.moniStatus=1,this.currMaker.resumeMove()},init:function(){var t=this;AMap.plugin("AMap.MoveAnimation",function(){t.currMaker=new AMap.Marker({map:t.map,position:t.paths[0],icon:n("4058"),offset:new AMap.Pixel(-20,-26)}),t.passedPolyline=new AMap.Polyline({map:t.map,strokeColor:"#AF5",strokeWeight:6}),t.currMaker.on("moving",function(e){t.passedPolyline.setPath(e.passedPath),t.passedPath=e.passedPath}),t.map.setFitView(),t.currMaker.hide(),console.log("事件已预备")})}},mounted:function(){this.init()}},M=w,A=Object(m["a"])(M,f,v,!1,null,null,null),P=A.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showRouter?t._e():n("div",{on:{click:t.searchRouter}},[t._v("导航")])},T=[],b=n("75fc"),y=(n("ac6a"),n("f3e2"),n("2caf"),n("386d"),{props:["map","center","destination"],data:function(){return{driving:"",paths:[],destMaker:"",steps:[],showRouter:!1}},methods:{searchRouter:function(){this.$emit("showRouter"),this.showRouter=!0;var t=this,e=t.center,n=t.destination;""!=t.driving&&t.driving.clear(),t.driving.search(e,n,function(e,n){if(console.log(n),Array.isArray(n.routes)){var i=n.routes[0].steps;t.paths=[],Array.isArray(i)&&(t.steps=i,i.length,i.forEach(function(e){var n;e.path instanceof Array&&(n=t.paths).push.apply(n,Object(b["a"])(e.path))}),t.$emit("setSteps",i),t.$emit("setPaths",t.paths),console.log(t.paths))}})},getRouter:function(t){var e=this;AMap.plugin("AMap.Driving",function(){e.driving=new AMap.Driving({map:e.map,policy:AMap.DrivingPolicy.LEAST_TIME}),e.destMaker=new AMap.Marker({position:e.destination,icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",title:"进去 "}),e.map.add(e.destMaker)})}},mounted:function(){this.getRouter()}}),S=y,D=Object(m["a"])(S,k,T,!1,null,null,null),_=D.exports,R={components:{Gaode:o["a"],Baidu:s["a"],StartNav:c["a"],Tencent:r["a"],Locating:g,Simulation:P,GetRouter:_},data:function(){return{inDaohang:!1,msg:"vue-amap向你问好！",userStatus:0,map:"",paths:[],center:null,centerp:null,geolocation:"",geo:"",oldTime:(new Date).getTime(),nowTime:(new Date).getTime(),destination:[117.27626,34.685612],ltimer:null,steps:null,passedPolyline:"",passedPath:"",currMaker:"",currLine:"",moveLine:"",moniStatus:0,destMaker:""}},methods:{changeCenter:function(t){this.center=t},achieveDistance:function(){this.$toast("achieveDistance"),console.log("achieveDistance")},achieveTime:function(){this.$toast("achieveTime"),console.log("achieveTime")},setPaths:function(t){this.paths=t},setSteps:function(t){this.steps=t},xunche:function(){this.destination=[117.277289,34.684667],this.getRouter()},starting:function(){this.$refs.grouter.searchRouter(),this.inDaohang=!0},stoping:function(){this.inDaohang=!1},startAni:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){startAni()}),showRouter:function(){this.userStatus=1,this.getRouter()},getRouter:function(t){},init:function(){var t=this;this.map=new AMap.Map("container",{resizeEnable:!0,zoom:18,pitch:40,zooms:[2,20],rotateEnable:!0,pitchEnable:!0,viewMode:"3D",center:t.destination});new AMap.Object3DLayer;this.map.plugin("AMap.Geolocation",function(){}),console.log(this.map)}},mounted:function(){var t=this;i&&2==i.split(",").length&&(this.destination=i.split(","),console.log(this.destination)),window.inits=function(){t.init(),console.log(AMap)};var e="https://webapi.amap.com/maps?v=1.4.15&key=5a91b43f3d03c658319b29ab153e1af4&plugin=AMap.moveAnimation,Map3D&callback=inits",n=document.createElement("script");n.charset="utf-8",n.src=e,document.head.appendChild(n);var i=getQueryVariable("position")}},C=R,$=(n("37c1"),Object(m["a"])(C,i,a,!1,null,"65cc1a3c",null));e["default"]=$.exports}}]);