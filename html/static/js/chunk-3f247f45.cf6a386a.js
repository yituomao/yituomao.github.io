(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f247f45"],{3678:function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"cont"},[e("div",{staticClass:"control"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.userStatus,expression:"userStatus==0"}],staticClass:"daohang",on:{click:t.showRouter}},[t._v("\n\t\t\t寻车\n\t\t")]),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.userStatus,expression:"userStatus==1"}],staticClass:"cdiv"},[e("StartNav",{attrs:{steps:t.steps,center:t.center,paths:t.paths},on:{start:t.starting,xunche:t.xunche,stop:t.stoping,getRouter:t.getRouter}}),e("Baidu",{attrs:{dest:t.destination}}),e("Gaode",{attrs:{dest:t.destination}}),e("Tencent",{attrs:{dest:t.destination}}),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.inDaohang,expression:"!inDaohang"}],staticClass:"monidaohang",on:{click:t.startAni}},[t._v("\n\t\t\t\t模拟导航\n\t\t\t\t"),e("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.moniStatus,expression:"moniStatus!=0"}]},[e("div",{on:{click:function(n){return n.stopPropagation(),t.overAni(n)}}},[t._v("结束")]),e("div",{on:{click:function(n){return n.stopPropagation(),t.pauseAnimation(n)}}},[t._v("暂停")]),e("div",{on:{click:function(n){return n.stopPropagation(),t.resumeAnimation(n)}}},[t._v("继续")])])])],1)]),e("div",{staticClass:"amap-wrapper",attrs:{id:"container"}})])},i=[],a=(e("28a5"),e("75fc")),s=(e("ac6a"),e("f3e2"),e("2caf"),e("386d"),e("6d67"),e("6b54"),e("87b3"),e("67cc")),r=e("f015"),c=e("5ff3"),u=e("7e3c"),l={components:{Gaode:s["a"],Baidu:r["a"],StartNav:u["a"],Tencent:c["a"]},data:function(){return{inDaohang:!1,msg:"vue-amap向你问好！",userStatus:0,map:"",paths:[],center:null,centerp:null,geolocation:"",geo:"",oldTime:(new Date).getTime(),nowTime:(new Date).getTime(),destination:[117.27626,34.685612],ltimer:null,steps:null,passedPolyline:"",passedPath:"",currMaker:"",currLine:"",moveLine:"",moniStatus:0,destMaker:""}},methods:{xunche:function(){this.destination=[117.277289,34.684667],this.getRouter()},starting:function(){this.inDaohang=!0},stoping:function(){this.inDaohang=!1},startAni:function(t){function n(){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(){startAni()}),showRouter:function(){this.userStatus=1,this.getRouter()},pauseAnimation:function(){},resumeAnimation:function(){},stopAnimation:function(){},overAni:function(){},locatedSucc:function(t){this.nowTime=(new Date).getTime();var n=this.center,e=t.position;if(this.center=t.position,n&&e){if(0==this.userStatus)return;if(n.lat==e.lat&&n.lng==e.lng)this.nowTime-this.oldTime>25e3&&(this.oldTime=this.nowTime,this.getRouter(),console.log(n));else{var o=AMap.GeometryUtil.distance(n,e);o>200?this.getRouter(1):this.nowTime-this.oldTime>25e3&&(this.oldTime=this.nowTime,this.getRouter(1))}}},locatedFail:function(t){console.log(t)},showAni:function(){var t=this;t.map.remove(t.currMaker),t.map.remove(t.currLine),AMap.plugin("AMap.MoveAnimation",function(){var n=t.paths;console.log("innnnn"),t.currMaker=new AMap.Marker({map:t.map,position:t.paths[0],icon:e("4058"),offset:new AMap.Pixel(-20,-26)}),t.currLine=new AMap.Polyline({map:t.map,path:n,showDir:!0,strokeColor:"#28F",strokeWeight:6}),t.passedPolyline=new AMap.Polyline({map:t.map,strokeColor:"#AF5",strokeWeight:6}),t.currMaker.on("moving",function(n){t.passedPolyline.setPath(n.passedPath),t.passedPath=n.passedPath}),t.map.setFitView(),t.startAni=function(){t.moniStatus=1,t.currMaker.moveAlong(n,{duration:200,autoRotation:!0})},t.overAni=function(){t.stopAnimation(),t.passedPolyline.setPath(null),t.showAni(),t.moniStatus=0},t.pauseAnimation=function(){t.moniStatus=2,t.currMaker.pauseMove()},t.resumeAnimation=function(){t.moniStatus=1,t.currMaker.resumeMove()},t.stopAnimation=function(){t.currMaker.stopMove(),t.moniStatus=2},t.inDaohang&&(t.map.remove(t.currMaker),t.map.remove(t.passedPolyline)),console.log("事件已预备")})},locating:function(){var t=this;this.geo.getCurrentPosition(function(n,e){"complete"==n&&t.locatedSucc(e),t.ltimer=setTimeout(function(){t.locating()},2e3)})},getRouter:function(t){var n=this;n.map.remove(n.destMaker),AMap.plugin("AMap.Walking",function(){var t=new AMap.Walking({}),e=n.center,o=n.destination;t.search(e,o,function(t,e){if(console.log(t),console.log(e),Array.isArray(e.routes)){var o=e.routes[0].steps;n.paths=[],Array.isArray(o)&&(n.steps=o,o.length,o.forEach(function(t){var e;t.path instanceof Array&&(e=n.paths).push.apply(e,Object(a["a"])(t.path))}),console.log(n.paths),n.showAni())}else"OVER_DIRECTION_RANGE"==e&&n.$toast("您的距离超出范围，暂时无法为您导航，请稍后重试")}),n.destMaker=new AMap.Marker({position:n.destination,title:"进去 "}),n.map.add(n.destMaker)})},init:function(){var t=this;this.map=new AMap.Map("container",{resizeEnable:!0,zoom:18,pitch:40,zooms:[2,20],rotateEnable:!0,pitchEnable:!0,viewMode:"3D",center:t.destination}),this.map.plugin("AMap.Geolocation",function(){t.geolocation=new AMap.Geolocation({enableHighAccuracy:!0,timeout:3e3,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"LB",buttonOffset:new AMap.Pixel(10,20),showMarker:!1,showCircle:!1,panToLocation:!0,zoomToAccuracy:!0}),t.destMaker=new AMap.Marker({position:t.destination,title:"进去 "}),t.map.add(t.destMaker),t.geo=new AMap.Geolocation({enableHighAccuracy:!0,timeout:3e3,maximumAge:0,convert:!0,showButton:!1,showMarker:!0,showCircle:!1,panToLocation:!1,zoomToAccuracy:!1}),t.map.addControl(t.geolocation),t.map.addControl(t.geo),t.locating()}),console.log(this.map)}},mounted:function(){var t=this;o&&2==o.split(",").length&&(this.destination=o.split(","),console.log(this.destination)),window.init=function(){t.init(),console.log(AMap)};var n="https://webapi.amap.com/maps?v=2.0&key=5a91b43f3d03c658319b29ab153e1af4&plugin=AMap.moveAnimation,Map3D&callback=init",e=document.createElement("script");e.charset="utf-8",e.src=n,document.head.appendChild(e);var o=getQueryVariable("position")}},p=l,m=(e("898f"),e("2877")),h=Object(m["a"])(p,o,i,!1,null,"262d9f53",null);n["default"]=h.exports},4058:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEJ0lEQVRoQ+2ZS2wbVRSG/zN2EjYo9jVIpKu28bjqI7uWHS2rNOygXUFZVEAVPJNUgoiWHekOilykJjMm4qEuaFnRsoNmBWVHu+tLnXEfqxYJfJ2IDUnsOWgcVBlqz8wdj4Ut9W7vf875vznXVzPHhAFfNOD+8RQgqIM56+4+f79qjl/tVad72gFhu1/4xqWhHxs8gLPuiEjjryZAHc/guL7WC4iedSBnV2YZfNY3TaDjVSO/MFAAwnavA9jzj+kb0tAnBgYgY7sHNOCnVsMe8PKKof+cNERPjlDOds8z8EarWQIuVA39SN8DZD67n9FG6rV2Rr21dHblvW0rSUIk3oGs7Z4k4ON2Jhn4sGbon/Q1gLDduwC2dzB5Txr6eN8CiM8rU/D4h0CDGr0i383/mBREokdIlCsXwfxaoDmiS7KYP9R3AM8tPRjzGhsPoxjTUkNb/pje+iiKNkyTWAeE5c6D8FFYweY+45Q09flI2hBRcgB25SHAY9FM0SNp5LdE0warEgHIWc4hJvpOxRAxH66ahYsqMe20iQAI2/VvlYOKZi5LQ59SjHlC3jXAqO1sT4H8u195NcDjq0bhnnJgS0DXAMJ2TgP0QTwT/Kk0CifixW5GJQDg+u82ozFNrEpDz8SM7R4ga7lHiPBNNwaY8WbN1M/HzdFVB4TtXAHopbjFN+P4F2kU9sfNERsgW761h3jI/+rqejFtTNSKu27ESdQFQGWBmGfiFP1vDBMt1or52Ti5YgOIsrsGxnCcom0u83VZ1Efi5IoFIGz3HQDNmU+C65g09C9V88UDKLtXwdirWixQT7gmi3pzkqeylAFy1p19TNqvKkWiaom9F6vmDqUxpDKAsJyvQPRWVFNKOuavpVl4WyVGDWCJh0Sjsq5SQFUrU/lhTNNG1DglgNZxYdQCqjrVMaQSgLDdmwB2qZpS1N+Shr47akxkgMyis1/TKPHRYDujnscHVmYKV6JARAYQlnMBRK9HSdq1hvlbaRb+NZrslDMSQHbp2ig1RhMdCYZBcmo1U5veuxqmiwZQrpwgZsWRIFcJVPINMHgOoFyYmdZ9JjpZK+ZPh8VEAhC263/2bQtL1twnuk6ed6ZqFs616nOWc5Q17X0wR/2f4L409E4jysepQwFE2T0IRpRR4DIYJWnqy0GgwnInQZgDMBn6QAhTsqhfDtKFAmRt9xIBr3ZMQnSO6xtnarM7lb4Nsgu3Jyg95HfkaKfcDHxfM/TAUWUgwPPWzRcaNNxmBMjrDCrVvXrpz5md1dAnGSB4dvF2Lq2l52jzd/LE63mK18d+N3f/FusWEtadeZDWMi6kB0QoVYv5xW5Md4rNlSszzP7x4q2PNeydkuaOjmPI0CPUhIA2CY1LslhQmr7FhRRl5zA8mgO85SDzzTsjbpF+iXsK8H934m9MSk5Ay1+VDwAAAABJRU5ErkJggg=="},"898f":function(t,n,e){"use strict";var o=e("b88e"),i=e.n(o);i.a},b88e:function(t,n,e){}}]);